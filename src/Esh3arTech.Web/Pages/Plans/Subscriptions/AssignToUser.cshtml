@page
@using Esh3arTech.Localization
@using Microsoft.Extensions.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal
@using Volo.Abp.Validation.StringValues
@inject IStringLocalizer<Esh3arTechResource> L
@model Esh3arTech.Web.Pages.Plans.Subscriptions.AssignToUserModel
@{
    Layout = null;
}


<form asp-page="/Plans/Subscriptions/AssignToUser">
    <abp-modal size="Large">
        <abp-modal-header title="@L["Hdr:AssignToUser"].Value">
        </abp-modal-header>
        <abp-modal-body>
            <div class="col-md-12">
                <p class="text-muted">
                    @Model.PlanModel.Name.ToUpper() -
                    @L["CostPerDay"].Value @if (@Model.PlanModel.DailyPrice.HasValue)
                    {
                        @Model.PlanModel.DailyPrice.Value
                    } -
                    @L["CostPerWeek"].Value @if (@Model.PlanModel.WeeklyPrice.HasValue)
                    {
                        @Model.PlanModel.WeeklyPrice.Value
                    } -
                    @L["CostPerMonth"].Value @if (@Model.PlanModel.MonthlayPrice.HasValue)
                    {
                        @Model.PlanModel.MonthlayPrice.Value
                    } -
                    @L["CostPerYear"].Value @if (@Model.PlanModel.AnnualPrice.HasValue)
                    {
                        @Model.PlanModel.AnnualPrice.Value
                    }
                </p>
            </div>
            <abp-input asp-for="PlanId" />
            <div class="row">
                <div class="col-md-12">
                    <abp-select asp-for="Model.UserId" asp-items="Model.UserList" label="@L["AssignToUsers"].Value" />
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <abp-select asp-for="Model.BillingInterval" label="@L["BillingInterval"].Value" id="BillingInterval" />
                </div>
                <div class="col-md-2 align-content-center">
                    <label class="form-check-label fw-bold">@L["EnableCustomPrice"].Value</label>
                </div>
                <div class="col-md-1 d-flex justify-content-center align-items-center form-check form-switch">
                    <input class="form-check-input" type="checkbox">
                </div>
                <div class="col-md-3">
                    <abp-input asp-for="Model.Price" title="@L["CustomPrice"].Value" id="Price"></abp-input>
                </div>
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox">
                <label class="form-check-label fw-bold">Auto Renew</label>
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox">
                <label class="form-check-label fw-bold">Is Active</label>
            </div>
        </abp-modal-body>
        <abp-modal-footer buttons="@(AbpModalButtons.Cancel|AbpModalButtons.Save)"></abp-modal-footer>
    </abp-modal>
</form>

<script>
    // We use a self-executing function to avoid polluting global scope
    (function ($) {
        // Use 'change', not 'onClick'
        // Use document delegation because the modal HTML is injected dynamically
        $(document).on('change', '#BillingInterval', function (e) {
            console.log("Billing Interval changed: " + $(this).val());

            // Example: Alert to verify it works visually
            // alert("Changed!");
        });
    })(jQuery);
</script>